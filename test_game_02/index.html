<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shadowfall Depths - Roguelike Dungeon Crawler</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div id="gameContainer">
        <header id="gameHeader">
            <div class="header-left">
                <h1>Shadowfall Depths</h1>
                <div class="game-stats">
                    <span class="stat">Floor: <span id="currentFloor">1</span></span>
                    <span class="stat">Score: <span id="currentScore">0</span></span>
                </div>
            </div>
            <div class="header-right">
                <div class="meta-progress">
                    <span class="meta-stat">Total Runs: <span id="totalRuns">0</span></span>
                    <span class="meta-stat">Best Floor: <span id="bestFloor">0</span></span>
                    <span class="meta-stat">Souls: <span id="totalSouls">0</span></span>
                </div>
            </div>
        </header>

        <main id="gameMain">
            <div id="gameCanvas-container">
                <canvas id="gameCanvas" width="800" height="600"></canvas>
                <div id="gameOverlay">
                    <div id="startScreen" class="screen">
                        <h2>Enter the Shadowfall Depths</h2>
                        <p>Navigate with WASD or Arrow Keys</p>
                        <p>Collect treasures, defeat enemies, descend deeper</p>
                        <button id="startGame" class="btn-primary">Begin Your Descent</button>
                        <button id="upgradesBtn" class="btn-secondary">Soul Upgrades</button>
                    </div>
                    
                    <div id="gameOverScreen" class="screen hidden">
                        <h2>You Have Fallen</h2>
                        <p id="gameOverStats"></p>
                        <p id="soulsEarned"></p>
                        <button id="restartGame" class="btn-primary">Rise Again</button>
                        <button id="upgradesAfterDeath" class="btn-secondary">Spend Souls</button>
                    </div>

                    <div id="upgradesScreen" class="screen hidden">
                        <h2>Soul Upgrades</h2>
                        <div id="upgradesList">
                            <div class="upgrade-item" data-upgrade="health">
                                <h3>Vitality</h3>
                                <p>Increase maximum health (+20 HP)</p>
                                <p>Cost: <span class="cost">10</span> souls</p>
                                <button class="upgrade-btn">Upgrade</button>
                            </div>
                            <div class="upgrade-item" data-upgrade="damage">
                                <h3>Strength</h3>
                                <p>Increase damage dealt (+5 damage)</p>
                                <p>Cost: <span class="cost">15</span> souls</p>
                                <button class="upgrade-btn">Upgrade</button>
                            </div>
                            <div class="upgrade-item" data-upgrade="speed">
                                <h3>Agility</h3>
                                <p>Increase movement speed (+10% speed)</p>
                                <p>Cost: <span class="cost">12</span> souls</p>
                                <button class="upgrade-btn">Upgrade</button>
                            </div>
                            <div class="upgrade-item" data-upgrade="luck">
                                <h3>Fortune</h3>
                                <p>Better loot and rare items (+10% luck)</p>
                                <p>Cost: <span class="cost">20</span> souls</p>
                                <button class="upgrade-btn">Upgrade</button>
                            </div>
                        </div>
                        <button id="closeUpgrades" class="btn-secondary">Return</button>
                    </div>
                </div>
            </div>

            <aside id="gameUI">
                <div class="ui-panel">
                    <h3>Hero Status</h3>
                    <div class="health-bar">
                        <div class="bar-label">Health</div>
                        <div class="bar-container">
                            <div id="healthBar" class="bar health-bar-fill"></div>
                            <span id="healthText" class="bar-text">100/100</span>
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Damage:</span>
                            <span id="playerDamage" class="stat-value">25</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Speed:</span>
                            <span id="playerSpeed" class="stat-value">100%</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Luck:</span>
                            <span id="playerLuck" class="stat-value">0%</span>
                        </div>
                    </div>
                </div>

                <div class="ui-panel">
                    <h3>Inventory</h3>
                    <div id="inventory" class="inventory-grid">
                        <!-- Inventory items will be populated here -->
                    </div>
                </div>

                <div class="ui-panel">
                    <h3>Minimap</h3>
                    <canvas id="minimap" width="150" height="150"></canvas>
                </div>

                <div class="ui-panel">
                    <h3>Controls</h3>
                    <div class="controls-help">
                        <p><kbd>WASD</kbd> / <kbd>↑↓←→</kbd> Move</p>
                        <p><kbd>Space</kbd> Attack</p>
                        <p><kbd>E</kbd> Interact</p>
                        <p><kbd>ESC</kbd> Pause</p>
                    </div>
                </div>
            </aside>
        </main>

        <div id="pauseScreen" class="screen hidden">
            <h2>Game Paused</h2>
            <button id="resumeGame" class="btn-primary">Resume</button>
            <button id="quitGame" class="btn-secondary">Quit to Menu</button>
        </div>
    </div>

    <!-- Game Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/gameEngine.js"></script>
    <script src="js/entities.js"></script>
    <script src="js/dungeon.js"></script>
    <script src="js/items.js"></script>
    <script src="js/combat.js"></script>
    <script src="js/metaprogression.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/input.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/main.js"></script>
</body>
</html>